import React from 'react'
import {Select,Button,Row,Form} from 'antd'
import PropsTypes from 'prop-types'
import styles from './index.module.less'

const { Option } = Select
const Label = ({ title, children }) => {
  return (
    <Form.Item className="headerSearch-page-search-label">
      <label className="headerSearch-page-search-label-item">{title}：</label>
      <span className="headerSearch-page-search-label-span">{children}</span>
    </Form.Item>
  )
}
const ModalData =(props) =>{
    const { getFieldDecorator, validateFields } = props.form
    const {point,number} = props
    console.log('类型',number)

   const changeEvent=(e)=>{//获取点击选择的考点
     const {getNumber} = props
      getNumber(e)
    }

    const handleSubmit = e => {
        const { resetFields } = props.form   
      const {handleOK} = props
      e.preventDefault();
      validateFields((err, values) => {
        if (!err) {
          // console.log('values', values)
          handleOK(values)
        }
        resetFields(); 
      })
    }
    const reset = () => {//重置
      const { resetFields } = props.form   
      resetFields();
    }
    return(
   <Form onSubmit={handleSubmit}>
        <Row>
          <section>
          <Label title="考点">
              {getFieldDecorator('siteId',
                { initialValue: '' }
              )(<Select placeholder="请选择考点" onChange={(e)=>changeEvent(e)}>
                {point && point.map((item) => {
                  return <Option value={item.siteId} key={item.siteId}>{item.siteName}</Option>
                })}</Select>)
              }
            </Label>
            <Label title="考场">
              {getFieldDecorator('examNumberId',
                { initialValue: '' }
              )(<Select placeholder="请选择考场" onChange={(e)=>changeEvent(e)} >
                {number && number.map((item) => {
                  return <Option value={item.examNumberId} key={item.examNumberId}>{item.name}</Option>
                })}</Select>)
              }
            </Label>
          </section>
        </Row>
        <Row className={styles.back}>
          <Button type="dashed"  onClick={reset}>重置</Button>
          <Button type="primary" htmlType="submit">确定</Button>
        </Row>
      </Form>
    )
}
ModalData.propTypes = {
  point: PropsTypes.array.isRequired,
  number: PropsTypes.array.isRequired,
  getNumber:PropsTypes.func.isRequired,
  handleOK:PropsTypes.func.isRequired
}
export default Form.create()(ModalData)