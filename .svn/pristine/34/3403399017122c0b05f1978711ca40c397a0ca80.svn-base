import React from 'react' 
import Dialog, {withLazy} from '@/components/Dialog'
import {Message} from 'antd'
import fetch from '@/services/axios';
import { get, isFunction } from 'lodash'



  function UnloadDb(props) {
    const {API,onCancel,record,title,contentTitle,onReload} = props
    // console.log('拿到的额',record)
    const handleDelete=()=>{
        // console.log('lol',param)
        fetch.post(API,{examNumberId:record.id}).then(res=>{
            console.log('request',res)
            if(get(res,'state')===10000){
                Message.success(res.data.message==="success"?'卸载成功':'卸载失败')
                isFunction(onReload) && onReload();
                onCancel()
            }
        })
    }
    return (
        <Dialog title={title} onOk={handleDelete} {...props}>
        <div>{contentTitle}</div>
      </Dialog>
    )
  }
  
  UnloadDb.defaultProps = {
    width: '500px',
    title: '卸载库',
  contentTitle: '是否确定要卸载库！'
  }
  
  export default withLazy(UnloadDb)