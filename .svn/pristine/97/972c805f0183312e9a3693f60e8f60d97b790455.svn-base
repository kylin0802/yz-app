import React from 'react';
import { Layout ,Icon} from 'antd';
import PropTypes from 'prop-types';
import fetch from '@/services/axios'
import './index.less';
import {get} from 'lodash'
import styles from './index.module.less';

const AdminHeader = props => {
  const { history } = props;

  const Logout = () => {
    const userName= localStorage.getItem('userName');
    fetch.post('/yzSmartGate/manage/logout',{userName}).then(res => {
      if(get(res, 'state') === 10000) {
        localStorage.removeItem('userName');
        localStorage.removeItem('siteId')
      }
    })
    history.push('/login');
  };

  return (
    <Layout.Header style={{ background: '#fff', padding: 0 }} className="clearfix yz-header">
      <div className="admin-header-right pull-right">
        <span className={styles.logout}>
        <Icon type="poweroff" style={{color:"red",marginRight:"3px"}}/>
          <span onClick={Logout}>退出</span>
        </span>
      </div>
    </Layout.Header>
  );
};

AdminHeader.propTypes = {
  breadcrumbOption: PropTypes.array,
  userInfo: PropTypes.object,
  onMenuClick: PropTypes.func,
  currentMenuStatus: PropTypes.bool
};

AdminHeader.defaultProps = {
  onMenuClick: () => {},
  currentMenuStatus: false
};

export default AdminHeader;
