import React from 'react' 
import Dialog, {withLazy} from '@/components/Dialog'
import {Message} from 'antd'
import fetch from '@/services/axios';
import { get, isFunction } from 'lodash'



  function RebuildDb(props) {
    const {API,onCancel,record,title,contentTitle,onReload} = props
    // console.log('拿到的额',record)
    const handleDelete=()=>{
        // console.log('lol',param)
        fetch.post(API,{examNumberId:record.id}).then(res=>{
            console.log('request',res)
            if(get(res,'state')===10000){
                Message.success(res.data.message==="success"?'操作成功':'操作失败')
                isFunction(onReload) && onReload();
                onCancel()
            }
        })
    }
    return (
        <Dialog title={title} onOk={handleDelete} {...props}>
        <div>{contentTitle}</div>
      </Dialog>
    )
  }
  
  RebuildDb.defaultProps = {
    width: '500px',
    title: '重建库',
  contentTitle: '是否确定要重建库！'
  }
  
  export default withLazy(RebuildDb)