import React from 'react';
import { get, isFunction } from 'lodash';
import { message } from 'antd';
import fetch from '@/services/axios';
import Dialog, { withLazy } from '@/components/Dialog';

function DeleteDialog(props) {
  const { deleteApi = '', prams = {}, title, onCancel, contentTitle, onReload } = props;
  const handleDelete = () => {
    console.log('测试')
    fetch.post(deleteApi, { ...prams }).then(res => {
      if (get(res, 'state') === 10000) {
        message.success(get(res, 'message'));
        isFunction(onReload) && onReload();
      } else {
        message.error(get(res, 'message'));
      }
      onCancel();
    });
  };

  return (
    <Dialog title={title} onOk={handleDelete} {...props}>
      <div>{contentTitle}</div>
    </Dialog>
  );
}

DeleteDialog.defaultProps = {
  width: '500px',
  title: '删除',
  contentTitle: '您确定要删除吗！'
};

export default withLazy(DeleteDialog);
