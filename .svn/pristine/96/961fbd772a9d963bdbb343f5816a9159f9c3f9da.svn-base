import React from 'react'
import { Form, Select } from 'antd'

import './index.less'
const FormItem = Form.Item
const { Option } = Select
const set = new Set()
const Label = ({ title, children }) => (
  <FormItem className="examNumber-page-search-label">
    <label className="examNumber-page-search-label-item">{title}：</label>
    <span className="examNumber-page-search-label-span">{children}</span>
  </FormItem>
)

const Wrap = props => {
  const { getFieldDecorator } = props.form
  const { onHandleSearch, siteData, siteId } = props
  const handleSubmit = (siteId) => {
    // e.preventDefault()
    // validateFields((err, values) => {
    //   if (!err) {
    //     console.log('values', values)
    onHandleSearch({ siteId })
    //   }
    // })
  }
  set.add(onHandleSearch)


  return (
    <Form className="examNumber-page-search">
      <section className="examNumber-page-search-list">
        {/* {console.log('callback', set.size)} */}
        <Label title="查询">
          {getFieldDecorator('siteId', { initialValue: siteId })(
            <Select onChange={handleSubmit}>
              {!!siteData.length && siteData.map(({ siteId, siteName }) => (
                <Option value={siteId}> {siteName}</Option>)
              )}
            </Select>
          )}
        </Label>
      </section>
    </Form>
  )
}
let FormWrap = Form.create()(Wrap)

const Search = React.memo(props => (<FormWrap {...props} />))




export default Search