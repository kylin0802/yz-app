import React from 'react' 
import Dialog, {withLazy} from '@/components/Dialog'
import {Message} from 'antd'
import fetch from '@/services/axios';
import { get, isFunction } from 'lodash'



  function DeletePoint(props) {
    const {API,onCancel,record,title,contentTitle,onReload} = props
    // console.log('拿到的额',record)
    const handleDelete=()=>{
        // console.log('lol',param)
        fetch.post(API,{siteId:record.siteId}).then(res=>{
            // console.log('request',res)
            if(get(res,'state')===10000){
                Message.success(res.message)
                isFunction(onReload) && onReload();
                onCancel()
            }
        })
    }
    return (
        <Dialog title={title} onOk={handleDelete} {...props}>
        <div>{contentTitle}</div>
      </Dialog>
    )
  }
  
  DeletePoint.defaultProps = {
    width: '500px',
    title: '删除',
  contentTitle: '您确定要删除吗！'
  }
  
  export default withLazy(DeletePoint)